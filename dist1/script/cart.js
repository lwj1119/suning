"use strict";$(".include").each(function(){if($(this).attr("file1")){var t=$(this);$(this).load($(this).attr("file1"),function(i){t.after(i).remove()})}}),$(".include").each(function(){if($(this).attr("file2")){var t=$(this);$(this).load($(this).attr("file2"),function(i){t.after(i).remove()})}}),function(e){if(jscookie.get("cookiesid")&&jscookie.get("cookienum")){var o=jscookie.get("cookiesid").split(","),c=jscookie.get("cookienum").split(",");e.each(o,function(i,t){var n,s;n=o[i],s=c[i],e.ajax({url:"http://localhost/jsLwj/src/suning/php/alldata.php",dataType:"json"}).done(function(i){e.each(i,function(i,t){if(n===t.sid){var o=e(".goodlist:hidden").clone(!0,!0);o.find(".cart_img img").attr("src",t.url),o.find(".cart_img img").attr("sid",t.sid),o.find(".cart_goods span").html(t.title),o.find(".cart_price .price1").html(t.price),o.find(".cart_num .num1").val(s),o.find(".cart_sum .sum1").html((t.price*s).toFixed(2)),o.css("display","block"),e(".goodlist0").append(o),a()}})})})}function a(){var o=0,n=0;e(".goodlist:visible").each(function(i,t){e(t).find(".quanxuan1 input").prop("checked")&&(o+=parseInt(e(t).find(".cart_num input").val()),n+=parseInt(e(t).find(".cart_sum .sum1").html()))}),e(".goodlistfoot .xuanze span").html(o),e(".zongjia1").html(n.toFixed(2))}function t(i){return(parseFloat(i.parents(".goodlist").find(".price1").html())*parseInt(i.parents(".goodlist").find(".num1").val())).toFixed(2)}e(".allsel").on("change",function(){e(".goodlist:visible").find(":checkbox").prop("checked",e(this).prop("checked")),e(".allsel").prop("checked",e(this).prop("checked")),a()});var i=e(".goodlist:visible").find(":checkbox");e(".goodlist0").on("change",i,function(){e(".goodlist:visible").find(":checkbox").length===e(".goodlist:visible").find("input:checked").size()?e(".allsel").prop("checked",!0):e(".allsel").prop("checked",!1),a()}),e(".numdown").on("click",function(){var i=e(this).parents(".goodlist").find(".num1").val();--i<1&&(i=1),e(this).parents(".goodlist").find(".num1").val(i),e(this).parents(".goodlist").find(".sum1").html(t(e(this))),a(),l(e(this))}),e(".numup").on("click",function(){var i=e(this).parents(".goodlist").find(".num1").val();++i<1&&(i=1),e(this).parents(".goodlist").find(".num1").val(i),e(this).parents(".goodlist").find(".sum1").html(t(e(this))),a(),l(e(this))}),e(".cart_num input").on("input",function(){$val=e(this).val(),/^\d+$/g.test($val)||e(this).val(1),e(this).parents(".goodlist").find(".cart_sum .sum1").html(t(e(this))),a(),l(e(this))});var n=[],s=[];function d(){s=jscookie.get("cookiesid")&&jscookie.get("cookienum")?(n=jscookie.get("cookiesid").split(","),jscookie.get("cookienum").split(",")):(n=[],[])}function l(i){d();var t=i.parents(".goodlist").find("img").attr("sid");s[e.inArray(t,n)]=i.parents(".goodlist").find(".num1").val(),jscookie.add("cookienum",s,10)}function r(o,i){var n=-1;e.each(i,function(i,t){o===t&&(n=i)}),i.splice(n,1),s.splice(n,1),jscookie.add("cookiesid",i,10),jscookie.add("cookienum",s,10)}e(".cart_caozuo .del1").on("click",function(){d(),window.confirm("你确认要删除吗")&&(e(this).parents(".goodlist").remove(),r(e(this).parents(".goodlist").find("img").attr("sid"),n),a())}),e(".del2 span").on("click",function(){d(),window.confirm("你确定要清空购物车吗？")&&(e(".goodlist:visible").each(function(){e(this).find(":checkbox").is(":checked")&&(e(this).remove(),r(e(this).find("img").attr("sid"),n))}),a())})}(jQuery);